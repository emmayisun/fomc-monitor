<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOMC Press Conference Transcripts</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Â∑¶‰æßÂØºËà™Ê†è */
        .sidebar {
            width: 240px;
            background: #ffffff;
            border-right: 1px solid #e5e7eb;
            padding: 32px 24px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar-header {
            margin-bottom: 32px;
        }

        .sidebar-title {
            font-size: 20px;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .sidebar-subtitle {
            font-size: 13px;
            color: #999;
            font-weight: 400;
        }

        .search-box {
            margin-bottom: 24px;
        }

        .search-box input {
            width: 100%;
            padding: 8px 0;
            font-size: 15px;
            border: none;
            border-bottom: 1px solid #e5e7eb;
            background: transparent;
            transition: all 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-bottom-color: #1a1a1a;
        }

        .search-box input::placeholder {
            color: #999;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 4px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 8px 0;
            color: #666;
            text-decoration: none;
            transition: all 0.2s;
            font-size: 15px;
            font-weight: 400;
        }

        .nav-link:hover {
            color: #1a1a1a;
        }

        .nav-link.active {
            color: #1a1a1a;
            font-weight: 500;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 40px 48px;
            max-width: 900px;
        }

        .content-header {
            margin-bottom: 40px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .content-title {
            font-size: 28px;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 4px;
            display: inline-block;
        }

        .content-subtitle {
            font-size: 14px;
            color: #999;
            font-weight: 400;
        }

        /* Á≠õÈÄâÊ†áÁ≠æ */
        .filter-tabs {
            display: flex;
            gap: 24px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 0;
            background: transparent;
            border: none;
            font-size: 15px;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 400;
            position: relative;
        }

        .filter-tab:hover {
            color: #1a1a1a;
        }

        .filter-tab.active {
            color: #1a1a1a;
            font-weight: 500;
        }

        .filter-tab.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            right: 0;
            height: 1px;
            background: #1a1a1a;
        }

        /* ËΩ¨ÂΩïÁ®øÂàóË°® */
        .transcript-list {
            display: flex;
            flex-direction: column;
        }

        .transcript-card {
            background: transparent;
            border: none;
            border-bottom: 1px solid #e5e7eb;
            padding: 24px 0;
            transition: all 0.2s;
            cursor: pointer;
        }

        .transcript-card:last-child {
            border-bottom: none;
        }

        .transcript-card:hover {
            opacity: 0.7;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .card-author {
            font-size: 14px;
            color: #999;
            font-weight: 400;
        }
        
        .card-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }
        
        .card-tag {
            font-size: 12px;
            color: #666;
            padding: 2px 8px;
            border: 1px solid #e5e7eb;
            background: transparent;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .card-tag:hover {
            border-color: #1a1a1a;
            color: #1a1a1a;
        }

        .card-date {
            font-size: 13px;
            color: #999;
            font-weight: 400;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
            line-height: 1.5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        .card-description {
            font-size: 15px;
            color: #666;
            line-height: 1.6;
            margin-top: 6px;
            font-weight: 400;
        }

        .card-footer {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 8px;
        }
        
        .card-original-link {
            font-size: 13px;
            color: #666;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            transition: color 0.2s;
        }
        
        .card-original-link:hover {
            color: #1a1a1a;
        }
        
        .card-original-link::before {
            content: 'üìÑ';
            font-size: 14px;
        }

        .card-link {
            color: #1a1a1a;
            text-decoration: none;
            font-size: 20px;
            font-weight: 600;
        }

        .card-link:hover {
            color: #1a1a1a;
        }

        .no-results {
            text-align: center;
            padding: 80px 20px;
            color: #999;
            font-size: 16px;
        }

        .no-results-icon {
            font-size: 40px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 1024px) {
            .sidebar {
                width: 200px;
            }

            .main-content {
                margin-left: 200px;
                padding: 32px 32px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 24px 20px;
            }

            .content-title {
                font-size: 24px;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #e5e7eb;
            border-top-color: #3b82f6;
            border-radius: 0;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">FOMC Monitor</h2>
                <p class="sidebar-subtitle">Federal Reserve Transcripts</p>
            </div>

            <div class="search-box">
                <input type="text" id="sidebarSearch" placeholder="ÊêúÁ¥¢...">
            </div>

            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active">
                            <span class="nav-icon">üìã</span>
                            <span>ÂÖ®ÈÉ®ËΩ¨ÂΩïÁ®ø</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">üìÖ</span>
                            <span>ÊåâÂπ¥‰ªΩ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">‚≠ê</span>
                            <span>ÈáçË¶Å‰ºöËÆÆ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">üîç</span>
                            <span>ÊêúÁ¥¢ÂéÜÂè≤</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <div class="content-header">
                <h1 class="content-title">FOMC Press Conference Transcripts</h1>
                <p class="content-subtitle">Federal Open Market Committee Press Conference Transcripts Archive</p>
            </div>

            <!-- Á≠õÈÄâÊ†áÁ≠æ -->
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all" data-type="year">ÂÖ®ÈÉ®</button>
                <button class="filter-tab" data-filter="2025" data-type="year">2025</button>
                <button class="filter-tab" data-filter="2024" data-type="year">2024</button>
                <button class="filter-tab" data-filter="2023" data-type="year">2023</button>
                <button class="filter-tab" data-filter="2022" data-type="year">2022</button>
            </div>
            
            <!-- ËØ¥ËØùËÄÖÊ†áÁ≠æ -->
            <div class="filter-tabs" id="speakerTags" style="margin-top: 16px;">
                <button class="filter-tab active" data-filter="all" data-type="speaker">ÂÖ®ÈÉ®ËØ¥ËØùËÄÖ</button>
                <!-- Speaker tags will be dynamically generated -->
            </div>

            <!-- ËΩ¨ÂΩïÁ®øÂàóË°® -->
            <div class="transcript-list" id="transcriptList">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ÈªòËÆ§Êï∞ÊçÆ
        const defaultTranscripts = [
            {
                date: "2024-12-18",
                title: "December 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the December 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-11-07",
                title: "November 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the November 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-09-18",
                title: "September 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the September 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-07-31",
                title: "July 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the July 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-06-12",
                title: "June 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the June 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-05-01",
                title: "May 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the May 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-03-20",
                title: "March 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the March 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2024-01-31",
                title: "January 2024 FOMC Press Conference",
                description: "Chair Powell's press conference following the January 2024 FOMC meeting.",
                html_path: null
            },
            {
                date: "2023-12-13",
                title: "December 2023 FOMC Press Conference",
                description: "Chair Powell's press conference following the December 2023 FOMC meeting.",
                html_path: null
            },
            {
                date: "2023-11-01",
                title: "November 2023 FOMC Press Conference",
                description: "Chair Powell's press conference following the November 2023 FOMC meeting.",
                html_path: null
            }
        ];

        let transcripts = [];
        let currentFilter = 'all';
        let currentSpeakerFilter = 'all';

        // Âä†ËΩΩËΩ¨ÂΩïÁ®øÊï∞ÊçÆ
        async function loadTranscripts() {
            try {
                const response = await fetch('data/transcripts.json');
                if (response.ok) {
                    const data = await response.json();
                    transcripts = data.map(t => ({
                        date: t.date,
                        title: t.title,
                        description: t.description || `Chair Powell's press conference following the ${t.date} FOMC meeting.`,
                        html_path: t.html_path,
                        pdf_url: t.pdf_url,
                        tags: t.tags || ["Powell"]  // Default to Powell if no tags
                    }));
                } else {
                    transcripts = defaultTranscripts;
                }
            } catch (error) {
                console.log('Using default transcripts data');
                transcripts = defaultTranscripts.map(t => ({
                    ...t,
                    tags: ["Powell"]  // Add default tags
                }));
            }
            
            renderTranscripts();
            return Promise.resolve();
        }

        // Ê†ºÂºèÂåñÊó•Êúü
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Ëé∑ÂèñÂπ¥‰ªΩÊ†áÁ≠æ
        function getYearTag(dateString) {
            return dateString.substring(0, 4);
        }

        // Ëé∑ÂèñÊâÄÊúâÂîØ‰∏ÄÁöÑËØ¥ËØùËÄÖÊ†áÁ≠æ
        function getAllSpeakerTags() {
            const allTags = new Set();
            transcripts.forEach(t => {
                if (t.tags && Array.isArray(t.tags)) {
                    t.tags.forEach(tag => allTags.add(tag));
                }
            });
            return Array.from(allTags).sort();
        }
        
        // Ê∏≤ÊüìËØ¥ËØùËÄÖÊ†áÁ≠æ
        function renderSpeakerTags() {
            const tagsContainer = document.getElementById('speakerTags');
            const tags = getAllSpeakerTags();
            
            if (tags.length === 0) return;
            
            // ‰øùÁïô"ÂÖ®ÈÉ®ËØ¥ËØùËÄÖ"ÊåâÈíÆÔºåÊ∑ªÂä†ÂÖ∂‰ªñÊ†áÁ≠æ
            const existingButtons = tagsContainer.querySelectorAll('.filter-tab[data-type="speaker"]');
            existingButtons.forEach(btn => {
                if (btn.dataset.filter !== 'all') {
                    btn.remove();
                }
            });
            
            tags.forEach(tag => {
                const button = document.createElement('button');
                button.className = 'filter-tab';
                button.dataset.filter = tag;
                button.dataset.type = 'speaker';
                button.textContent = tag;
                button.addEventListener('click', () => {
                    document.querySelectorAll('.filter-tab[data-type="speaker"]').forEach(t => t.classList.remove('active'));
                    button.classList.add('active');
                    currentSpeakerFilter = tag;
                    renderTranscripts();
                });
                tagsContainer.appendChild(button);
            });
        }
        
        // Ê∏≤ÊüìËΩ¨ÂΩïÁ®øÂàóË°®
        function renderTranscripts() {
            const listContainer = document.getElementById('transcriptList');
            
            let filtered = transcripts;
            
            // Â∫îÁî®Âπ¥‰ªΩÁ≠õÈÄâ
            if (currentFilter !== 'all') {
                filtered = filtered.filter(t => t.date.startsWith(currentFilter));
            }
            
            // Â∫îÁî®ËØ¥ËØùËÄÖÊ†áÁ≠æÁ≠õÈÄâ
            if (currentSpeakerFilter !== 'all') {
                filtered = filtered.filter(t => 
                    t.tags && Array.isArray(t.tags) && t.tags.includes(currentSpeakerFilter)
                );
            }
            
            // Â∫îÁî®ÊêúÁ¥¢
            const searchTerm = document.getElementById('sidebarSearch').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(t => 
                    t.title.toLowerCase().includes(searchTerm) ||
                    t.date.includes(searchTerm) ||
                    t.description.toLowerCase().includes(searchTerm) ||
                    (t.tags && t.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
                );
            }
            
            if (filtered.length === 0) {
                listContainer.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">üîç</div>
                        <p>Êú™ÊâæÂà∞ÂåπÈÖçÁöÑËΩ¨ÂΩïÁ®ø</p>
                    </div>
                `;
                return;
            }

            listContainer.innerHTML = filtered.map(transcript => {
                const link = transcript.html_path || transcript.pdf_url || '#';
                const isAvailable = transcript.html_path || transcript.pdf_url;
                const yearTag = getYearTag(transcript.date);
                const pdfLink = transcript.pdf_url || '#';
                const hasPdf = transcript.pdf_url;
                const tags = transcript.tags || ["Powell"];
                
                return `
                    <div class="transcript-card" onclick="${isAvailable && transcript.html_path ? `window.location.href='${link}'` : ''}">
                        <div class="card-header">
                            <span class="card-author">FOMC</span>
                            <span class="card-date">${formatDate(transcript.date)}</span>
                        </div>
                        <h3 class="card-title">
                            ${isAvailable ? `<a href="${link}" ${transcript.html_path ? '' : 'target="_blank"'} class="card-link">${transcript.title}</a>` : transcript.title}
                        </h3>
                        <p class="card-description">${transcript.description}</p>
                        <div class="card-tags">
                            ${tags.map(tag => `
                                <a href="#" class="card-tag" onclick="event.stopPropagation(); event.preventDefault(); filterBySpeaker('${tag}'); return false;">${tag}</a>
                            `).join('')}
                        </div>
                        ${hasPdf ? `
                        <div class="card-footer">
                            <a href="${pdfLink}" target="_blank" rel="noopener noreferrer" class="card-original-link" onclick="event.stopPropagation();">View Original PDF</a>
                        </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }
        
        // ÊåâËØ¥ËØùËÄÖÁ≠õÈÄâ
        function filterBySpeaker(speaker) {
            currentSpeakerFilter = speaker;
            document.querySelectorAll('.filter-tab[data-type="speaker"]').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.filter === speaker) {
                    tab.classList.add('active');
                }
            });
            renderTranscripts();
        }
        }

        // Á≠õÈÄâÊ†áÁ≠æ‰∫ã‰ª∂ÔºàÂπ¥‰ªΩÁ≠õÈÄâÔºâ
        document.querySelectorAll('.filter-tab[data-type="year"]').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab[data-type="year"]').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentFilter = tab.dataset.filter;
                renderTranscripts();
            });
        });
        
        // ËØ¥ËØùËÄÖÊ†áÁ≠æÁ≠õÈÄâ‰∫ã‰ª∂
        document.querySelectorAll('.filter-tab[data-type="speaker"]').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab[data-type="speaker"]').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentSpeakerFilter = tab.dataset.filter;
                renderTranscripts();
            });
        });

        // ÊêúÁ¥¢‰∫ã‰ª∂
        document.getElementById('sidebarSearch').addEventListener('input', () => {
            renderTranscripts();
        });

        // ÂàùÂßãÂåñ
        loadTranscripts().then(() => {
            renderSpeakerTags();
        });
    </script>
</body>
</html>
